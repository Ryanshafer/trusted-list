import{m as Me,n as Y,j as e,R as Te,P as A,o as Ae,p as I,q as Ie,u as Pe,r as J,s as $e,k as E,i as R,t as _e,d as Ee,S as Fe,A as He,a as Oe,b as Ue,B as N,v as Le,w as ze,L as P,E as z,C as Q,x as X,D as Z,y as ee,z as se,F as te,G as ae,T as re,J as ne,K as oe,M as le,N as ie,O as Ve,Q as Be,U as Ge,V as Ke,I as We,c as Ye,e as Je,f as Qe,g as Xe,h as M,W as Ze,X as es,Y as ss}from"./dashboard-content.9tNFM7Um.js";import{r as w,R as c}from"./index.BEY972Ys.js";import{m as ts,i as T,C as as,A as rs,B as V,a as ns}from"./AppShell.imk9ZHKQ.js";import{L as os,a as ls}from"./list.DNFbKqTO.js";import"./carousel.D1b-Qolm.js";var F="Tabs",[is]=Me(F,[Y]),ce=Y(),[cs,L]=is(F),de=w.forwardRef((s,r)=>{const{__scopeTabs:n,value:t,onValueChange:o,defaultValue:m,orientation:a="horizontal",dir:l,activationMode:u="automatic",...x}=s,h=Pe(l),[d,v]=J({prop:t,onChange:o,defaultProp:m??"",caller:F});return e.jsx(cs,{scope:n,baseId:$e(),value:d,onValueChange:v,orientation:a,dir:h,activationMode:u,children:e.jsx(A.div,{dir:h,"data-orientation":a,...x,ref:r})})});de.displayName=F;var me="TabsList",ue=w.forwardRef((s,r)=>{const{__scopeTabs:n,loop:t=!0,...o}=s,m=L(me,n),a=ce(n);return e.jsx(Te,{asChild:!0,...a,orientation:m.orientation,dir:m.dir,loop:t,children:e.jsx(A.div,{role:"tablist","aria-orientation":m.orientation,...o,ref:r})})});ue.displayName=me;var he="TabsTrigger",xe=w.forwardRef((s,r)=>{const{__scopeTabs:n,value:t,disabled:o=!1,...m}=s,a=L(he,n),l=ce(n),u=fe(a.baseId,t),x=ve(a.baseId,t),h=t===a.value;return e.jsx(Ae,{asChild:!0,...l,focusable:!o,active:h,children:e.jsx(A.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...m,ref:r,onMouseDown:I(s.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?a.onValueChange(t):d.preventDefault()}),onKeyDown:I(s.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(t)}),onFocus:I(s.onFocus,()=>{const d=a.activationMode!=="manual";!h&&!o&&d&&a.onValueChange(t)})})})});xe.displayName=he;var pe="TabsContent",ge=w.forwardRef((s,r)=>{const{__scopeTabs:n,value:t,forceMount:o,children:m,...a}=s,l=L(pe,n),u=fe(l.baseId,t),x=ve(l.baseId,t),h=t===l.value,d=w.useRef(h);return w.useEffect(()=>{const v=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(Ie,{present:o||h,children:({present:v})=>e.jsx(A.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!v,id:x,tabIndex:0,...a,ref:r,style:{...s.style,animationDuration:d.current?"0s":void 0},children:v&&m})})});ge.displayName=pe;function fe(s,r){return`${s}-trigger-${r}`}function ve(s,r){return`${s}-content-${r}`}var ds=de,be=ue,je=xe,ye=ge;const ms=ds,Ne=w.forwardRef(({className:s,...r},n)=>e.jsx(be,{ref:n,className:E("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r}));Ne.displayName=be.displayName;const $=w.forwardRef(({className:s,...r},n)=>e.jsx(je,{ref:n,className:E("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r}));$.displayName=je.displayName;const _=w.forwardRef(({className:s,...r},n)=>e.jsx(ye,{ref:n,className:E("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));_.displayName=ye.displayName;/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],B=R("eye",us);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xs=R("globe",hs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M11.636 6A13 13 0 0 0 19.4 3.2 1 1 0 0 1 21 4v11.344",key:"bycexp"}],["path",{d:"M14.378 14.357A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h1",key:"1t17s6"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 8v6",key:"aieo6v"}]],G=R("megaphone-off",ps);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],K=R("megaphone",gs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ce=R("message-circle",fs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bs=R("square-pen",vs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ys=R("user",js);var we="Toggle",Se=w.forwardRef((s,r)=>{const{pressed:n,defaultPressed:t,onPressedChange:o,...m}=s,[a,l]=J({prop:n,onChange:o,defaultProp:t??!1,caller:we});return e.jsx(A.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":s.disabled?"":void 0,...m,ref:r,onClick:I(s.onClick,()=>{s.disabled||l(!a)})})});Se.displayName=we;var ke=Se;const Ns=_e("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=w.forwardRef(({className:s,variant:r,size:n,...t},o)=>e.jsx(ke,{ref:o,className:E(Ns({variant:r,size:n,className:s})),...t}));U.displayName=ke.displayName;const Cs=(s,r)=>{const n=s.trim(),t=r.trim();return n?`${n.replace(/[.!?]\s*$/,"")}. ${t}`:t},qe=(s,r,n)=>{const t=s.startsWith("request-")||s.startsWith("req-"),o=ns[s];return o||[{id:1,sender:t?"user":"contact",text:Cs(r,n)}]},Re=({open:s,onOpenChange:r,card:n,onSave:t})=>{const[o,m]=c.useState(n.requestSummary||""),[a,l]=c.useState(n.request),[u,x]=c.useState("Career advice"),h=()=>{t({requestSummary:o,request:a}),r(!1)};return e.jsx(Ve,{open:s,onOpenChange:r,children:e.jsxs(Be,{className:"max-w-xl",children:[e.jsx(Ge,{children:e.jsx(Ke,{children:"Edit Request"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Short description"}),e.jsx(We,{value:o,onChange:d=>m(d.target.value),maxLength:32,placeholder:"e.g. Introduction to CTO needed"}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[o.length,"/32"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Category"}),e.jsxs(Ye,{value:u,onValueChange:x,children:[e.jsx(Je,{children:e.jsx(Qe,{placeholder:"Select category"})}),e.jsxs(Xe,{children:[e.jsx(M,{value:"Career advice",children:"Career advice"}),e.jsx(M,{value:"Introduction",children:"Introduction"}),e.jsx(M,{value:"Feedback",children:"Feedback"}),e.jsx(M,{value:"Hiring",children:"Hiring"}),e.jsx(M,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Details"}),e.jsx(Ze,{value:a,onChange:d=>l(d.target.value),rows:4,placeholder:"Describe what you need help with..."})]})]}),e.jsxs(es,{children:[e.jsx(N,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(N,{onClick:h,children:"Save Changes"})]})]})})},ws=({response:s,requestSummary:r,requestDetails:n})=>{const[t,o]=c.useState(!1),[m,a]=c.useState(()=>qe(s.chatId,r,n)),[l,u]=c.useState(""),[x,h]=c.useState(s.status),d=b=>{const p=b.trim();p&&(a(i=>[...i,{id:Date.now(),sender:"user",text:p}]),u(""))},v=b=>{a(p=>[...p,{id:Date.now(),sender:"system",text:"Request Completed",type:"system"},{id:Date.now()+1,sender:"user",text:`+50 Karma • ${b.note||"Thank you!"}`,type:"karma"}]),h("Completed")},S=()=>{a(b=>{const p=[...b];return p.length>0&&p[p.length-1].type==="karma"&&p.pop(),p.length>0&&p[p.length-1].type==="system"&&p.pop(),p}),h("In Progress")},q=s.name.split(" ").map(b=>b[0]).join("").slice(0,2).toUpperCase();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-muted/50 p-3 transition-colors hover:bg-muted/70 cursor-pointer",onClick:()=>o(!0),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ne,{className:"h-8 w-8",children:[s.avatarUrl?e.jsx(oe,{src:s.avatarUrl,alt:s.name,className:"object-cover"}):null,e.jsx(le,{children:q})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),x==="Completed"&&e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Completed"})]})]}),e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ie,{open:t,onOpenChange:o,contactName:s.name,messages:m,composer:l,onComposerChange:u,onSend:d,isHelpRequest:!0,isCompleted:x==="Completed",onComplete:v,onUndoComplete:S})]})},Ss=({request:s,hideUnpromoted:r=!1,onDelete:n})=>{const[t,o]=c.useState(s),[m,a]=c.useState(!1),[l,u]=c.useState(s.promoted??!0),[x,h]=c.useState(!1),[d,v]=c.useState(!1),S=j=>{o(k=>({...k,requestSummary:j.requestSummary||k.requestSummary,request:j.request||k.request}))},q={id:t.id,variant:"circle",name:"",request:t.request,requestSummary:t.requestSummary,relationshipTag:"",primaryCTA:""},b=t.endDate&&!Number.isNaN(Date.parse(t.endDate))?new Date(t.endDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):null,i=(j=>{switch(j){case"contact":return{label:"Ask a contact",icon:ys};case"circle":return{label:"Ask your circle",icon:ss};case"list":return{label:"Ask the list",icon:xs}}})(t.type),f=i.icon,C=["circle","list"].includes(t.type);return r&&!l&&C?null:e.jsx("div",{className:`transition-all duration-200 ease-in-out ${x?"opacity-0 scale-95 pointer-events-none":"opacity-100 scale-100"}`,children:e.jsxs(Q,{className:"relative flex h-full flex-col rounded-3xl border border-border bg-card shadow-sm",children:[e.jsxs(X,{className:"flex flex-1 flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[e.jsx(f,{className:"h-3.5 w-3.5"}),i.label]}),!l&&C&&e.jsx(V,{variant:"secondary",className:"h-5 px-1.5 text-[10px] font-normal bg-amber-100 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400",children:"Promotion Stopped"}),t.type==="contact"&&t.responses[0]?.status==="Completed"&&e.jsx(V,{variant:"secondary",className:"h-5 px-1.5 text-[10px] font-normal bg-blue-100 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/30 dark:text-blue-400",children:"Completed"})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"pr-8",children:[e.jsx("h3",{className:"text-lg font-semibold leading-tight",children:t.requestSummary}),b&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ends ",b]})]}),e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"h-8 w-8 -mr-2 -mt-2 rounded-full text-muted-foreground hover:text-foreground",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More options"})]})}),e.jsx(te,{align:"end",children:e.jsxs(ae,{className:"text-destructive focus:text-destructive",onClick:()=>{h(!0),setTimeout(()=>n?.(t.id),180)},children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Delete request"]})})]})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.request}),e.jsx("div",{className:"mt-auto pt-2",children:t.responses.length===0?e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs(N,{variant:"outline",className:"flex-1 gap-2 border-dashed text-sm",onClick:()=>a(!0),disabled:l,children:[e.jsx(bs,{className:"h-4 w-4"}),"Edit Request"]}),C&&e.jsx(N,{variant:l?"outline":"ghost",className:`flex-1 gap-2 text-sm ${l?"text-muted-foreground hover:text-foreground":"text-amber-600 hover:text-amber-700 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20"}`,onClick:()=>u(!l),children:l?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-4 w-4"}),"Stop promotion"]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4"}),"Resume promotion"]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2",children:"Responses"}),(d?t.responses:t.responses.slice(0,2)).map(j=>e.jsx(ws,{response:j,requestSummary:t.requestSummary,requestDetails:t.request},j.id)),t.responses.length>2&&e.jsx(N,{variant:"ghost",size:"sm",className:"w-full text-sm text-primary",onClick:()=>v(j=>!j),children:d?"See fewer responses":`See ${t.responses.length-2} more responses`}),C&&e.jsx(N,{variant:l?"outline":"ghost",size:"sm",className:`w-full gap-2 mt-2 text-sm ${l?"text-muted-foreground hover:text-foreground":"text-amber-600 hover:text-amber-700 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20"}`,onClick:()=>u(!l),children:l?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-3.5 w-3.5"}),"Stop promotion"]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-3.5 w-3.5"}),"Resume promotion"]})})]})})]}),e.jsx(Re,{open:m,onOpenChange:a,card:q,onSave:S})]})})},W=({card:s})=>{const r=c.useRef(null),[n,t]=c.useState({top:88}),[o,m]=c.useState(s.status),[a,l]=c.useState(s),[u,x]=c.useState(!1),[h,d]=c.useState(!1),[v,S]=c.useState(()=>qe(s.id,s.requestSummary||"",s.request)),[q,b]=c.useState(""),p=y=>{const g=y.trim();g&&(S(H=>[...H,{id:Date.now(),sender:"user",text:g}]),b(""))},i=y=>{S(g=>[...g,{id:Date.now(),sender:"system",text:"Request Completed",type:"system"},{id:Date.now()+1,sender:"user",text:`+50 Karma • ${y.note||"Thank you!"}`,type:"karma"}]),m("Completed")},f=()=>{S(y=>{const g=[...y];return g.length>0&&g[g.length-1].type==="karma"&&g.pop(),g.length>0&&g[g.length-1].type==="system"&&g.pop(),g}),m("In Progress")},C=y=>{l(g=>({...g,...y}))};c.useEffect(()=>{if(!r.current)return;const y=r.current.querySelector(".group.relative.cursor-pointer");if(y){const g=y.getBoundingClientRect(),H=r.current.getBoundingClientRect(),De=g.top-H.top;t({top:De-8})}},[]);const j=s.name.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase(),k=s.id.startsWith("request-"),D=o==="Completed";return e.jsxs("div",{ref:r,className:"relative",children:[e.jsx(Q,{className:"relative flex h-full flex-col rounded-3xl border border-border bg-card shadow-sm",children:e.jsxs(X,{className:"flex flex-1 flex-col gap-5 p-6 pb-4",children:[e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"absolute right-2.5 top-2.5 h-8 w-8 rounded-full text-muted-foreground hover:text-foreground",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More options"})]})}),e.jsx(te,{align:"end",children:e.jsxs(ae,{className:"text-destructive focus:text-destructive",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Delete request"]})})]}),e.jsxs("div",{className:"flex items-center gap-3 pr-10",children:[e.jsxs(ne,{className:"h-12 w-12",children:[a.avatarUrl?e.jsx(oe,{src:a.avatarUrl,alt:a.name,className:"object-cover"}):null,e.jsx(le,{children:j})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("p",{className:"text-lg font-semibold leading-tight",children:a.name}),a.connectedBy&&e.jsxs("p",{className:"text-xs text-muted-foreground/60",children:["Connected by ",a.connectedBy]})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[e.jsxs("div",{className:"group relative cursor-pointer rounded-3xl bg-muted/50 p-4 transition-colors hover:bg-muted/70 dark:bg-muted/40",onClick:()=>d(!0),children:[e.jsx("div",{className:"relative max-h-[4.5rem] overflow-hidden [mask-image:linear-gradient(to_bottom,black_30%,transparent_100%)]",children:e.jsx("p",{className:"text-base text-foreground/90 dark:text-slate-100 leading-relaxed",children:a.request})}),e.jsx("div",{className:"mt-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary py-1 px-3 rounded-full group-hover:bg-muted",children:"Read more"})})]}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"mt-3 flex",children:e.jsxs(N,{className:"w-full gap-1",onClick:()=>d(!0),children:[e.jsx(Ce,{className:"mr-1 h-4 w-4"}),D?"Read chat history":"Chat"]})})]})]})}),e.jsx(ie,{open:h,onOpenChange:d,contactName:a.name,messages:v,composer:q,onComposerChange:b,onSend:p,isHelpRequest:k,isCompleted:D,onComplete:i,onUndoComplete:f}),e.jsx(Re,{open:u,onOpenChange:x,card:a,onSave:C})]})},O=({layout:s,onLayoutChange:r,hideCompleted:n,onHideCompletedChange:t,hideUnpromoted:o,onHideUnpromotedChange:m,showCompletedFilter:a=!0,showUnpromotedFilter:l=!1,projection:u,primaryAction:x})=>e.jsx("section",{className:"mb-6 flex flex-col gap-4 rounded-xl border border-border/50 bg-muted/30 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsxs("div",{className:`flex items-center gap-3 rounded-lg border px-3 py-2 shadow-sm ${u.tone==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900 dark:border-emerald-900/50 dark:bg-emerald-900/20 dark:text-emerald-100":"border-primary/30 bg-primary/10 text-primary"}`,children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/70 dark:bg-white/10",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide",children:u.label}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-lg font-bold leading-tight",children:u.value}),u.sublabel&&e.jsx("span",{className:"text-[11px] text-muted-foreground leading-tight",children:u.sublabel})]})]})]}),(a||l)&&e.jsx(P,{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Show:"}),a&&e.jsxs(U,{pressed:n,onPressedChange:t,"aria-label":"Toggle completed visibility",className:"gap-2",children:[n?e.jsx(z,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Completed"})]}),l&&e.jsxs(U,{pressed:o,onPressedChange:m,"aria-label":"Toggle unpromoted visibility",className:"gap-2",children:[o?e.jsx(z,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Unpromoted"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x,e.jsxs(N,{variant:s==="grid"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>r("grid"),children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Grid view"})]}),e.jsxs(N,{variant:s==="list"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>r("list"),children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"List view"})]})]})]})});function Ts(){const[s,r]=c.useState("in-progress"),[n,t]=c.useState("grid"),[o,m]=c.useState(!1),[a,l]=c.useState(!1),[u,x]=c.useState(!1),[h,d]=c.useState(ts),v=T.helped[0]?.karma??50,S=T.helped.reduce((i,f)=>i+(f.karma??v),0),q=T.inProgress.length*v;c.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("tab");f&&["helped","in-progress","my-requests"].includes(f)&&r(f)},[]);const b=c.useMemo(()=>Ee.askForHelpCard.contacts,[]),p=c.useCallback(i=>{const f=`request-${Date.now()}`,C=i.askMode==="contact"?i.selectedContacts.map((D,y)=>({id:`${f}-resp-${y}`,name:D.name,status:"In Progress",chatId:`${f}-chat-${y}`})):[],j={id:f,requestSummary:i.shortDescription,request:i.requestDetails,responses:C,status:"Open",type:i.askMode,createdAt:new Date().toISOString(),promoted:i.askMode!=="contact",endDate:i.endDateEnabled&&i.endDate?i.endDate.toISOString():void 0};d(D=>[j,...D]),r("my-requests");const k=new URLSearchParams(window.location.search);k.set("tab","my-requests"),window.history.replaceState(null,"",`?${k.toString()}`)},[]);return e.jsx(Fe,{children:e.jsxs("div",{className:"flex min-h-screen bg-background w-full",children:[e.jsx(He,{}),e.jsxs(Oe,{className:"flex min-h-screen w-full flex-1 flex-col overflow-x-hidden",children:[e.jsx("div",{className:"flex items-center gap-3 border-b bg-background px-4 py-3 lg:hidden",children:e.jsx(Ue,{className:"border border-border"})}),e.jsx("div",{className:"flex-1 px-4 py-8 sm:px-6 lg:px-10",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("header",{className:"mb-8 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{variant:"ghost",size:"icon",asChild:!0,className:"rounded-full hover:bg-white hover:shadow-sm",children:e.jsxs("a",{href:"/trusted-list/",children:[e.jsx(as,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Back to Dashboard"})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold leading-tight tracking-tight sm:text-4xl",children:"Your Help Activity"}),e.jsx("p",{className:"text-muted-foreground",children:"All the ways you help — and get help — in one place."})]})]})}),e.jsxs(ms,{value:s,onValueChange:r,className:"w-full",children:[e.jsxs(Ne,{className:"grid w-full grid-cols-3 rounded-xl bg-muted/50 p-1",children:[e.jsx($,{value:"in-progress",className:"rounded-lg data-[state=active]:bg-white/70",children:"In Progress"}),e.jsx($,{value:"helped",className:"rounded-lg data-[state=active]:bg-white/70",children:"Helped"}),e.jsx($,{value:"my-requests",className:"rounded-lg data-[state=active]:bg-white/70",children:"My Requests"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs(_,{value:"helped",className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx(O,{layout:n,onLayoutChange:t,hideCompleted:o,onHideCompletedChange:m,hideUnpromoted:a,onHideUnpromotedChange:l,showCompletedFilter:!1,showUnpromotedFilter:!1,projection:{label:"Karma earned",value:`+${S}`,sublabel:"From people you helped",tone:"success"}}),e.jsx("div",{className:n==="grid"?"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3":"flex flex-col gap-4",children:T.helped.filter(i=>!o||i.status!=="Completed").map(i=>e.jsx(W,{card:i},i.id))})]}),e.jsxs(_,{value:"in-progress",className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx(O,{layout:n,onLayoutChange:t,hideCompleted:o,onHideCompletedChange:m,hideUnpromoted:a,onHideUnpromotedChange:l,showCompletedFilter:!1,showUnpromotedFilter:!1,projection:{label:"Projected karma",value:`+${q}`,sublabel:"If everything completes",tone:"info"}}),e.jsx("div",{className:n==="grid"?"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3":"flex flex-col gap-4",children:T.inProgress.filter(i=>!o||i.status!=="Completed").map(i=>e.jsx(W,{card:i},i.id))})]}),e.jsxs(_,{value:"my-requests",className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx(O,{layout:n,onLayoutChange:t,hideCompleted:o,onHideCompletedChange:m,hideUnpromoted:a,onHideUnpromotedChange:l,showUnpromotedFilter:!0,primaryAction:e.jsxs(N,{onClick:()=>x(!0),children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Ask for help"]})}),e.jsx("div",{className:n==="grid"?"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3":"flex flex-col gap-4",children:h.filter(i=>{const f=i.responses.some(C=>C.status==="Completed");return!(o&&f&&i.type==="contact")}).map(i=>e.jsx(Ss,{request:i,hideUnpromoted:a,onDelete:f=>d(C=>C.filter(j=>j.id!==f))},i.id))})]})]})]})]})}),e.jsx(rs,{open:u,onOpenChange:x,contacts:b,onSendRequest:p})]})]})})}export{Ts as default};
