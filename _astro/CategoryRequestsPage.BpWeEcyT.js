import{j as e}from"./index.wX83TmGO.js";import{R as a}from"./index.MCg13cn8.js";import{r as Y}from"./requests.DZ_jtkNB.js";import{S as Z,A as _,a as ee,b as se,c as te,I as ae,d as re,e as ne,f as le,g as ie,h as u,H as oe,C as de,R as ce,F as me}from"./HelpRequestCards.vHhRfiL6.js";import{B as h,A as ue,a as he,b as xe,D as pe,d as ge,E as fe,e as be,f as b,g as je,h as ve,F as Ne}from"./dialog.DhDyXcH9.js";import{F as we,L as ye,a as Ce}from"./list.qor1XC3X.js";import"./index.Bo7hZKLy.js";const Se=Y,qe=[{value:"career",label:"Career development"},{value:"design",label:"Design"},{value:"product",label:"Product thinking"},{value:"business",label:"Business & finance"},{value:"health",label:"Wellness & lifestyle"},{value:"education",label:"Learning"},{value:"tech",label:"Dev & tools"},{value:"network",label:"Networking"},{value:"other",label:"Other"},{value:"career-advice",label:"Career development"},{value:"interview-prep",label:"Career development"},{value:"resume-review",label:"Design"},{value:"introduction",label:"Networking"},{value:"general-support",label:"Other"}],ke={"career-advice":"career","interview-prep":"career","resume-review":"design",introduction:"network","general-support":"other"},Re=i=>{const x=ke[i]??i;return Se.filter(n=>n.category===x)};function Ie({slug:i}){const x=qe.find(s=>s.value===i)?.label||"Requests",[n,D]=a.useState("all"),[d,j]=a.useState("grid"),[p,F]=a.useState(""),[v,A]=a.useState(new Set),[l,g]=a.useState(null),[O,N]=a.useState(!1),[L,w]=a.useState([]),[$,y]=a.useState(""),[M,C]=a.useState(!1),[I,c]=a.useState(!1),[H,P]=a.useState("3 days"),[T,S]=a.useState(!1),q=a.useMemo(()=>Re(i).map((s,t)=>{const r=3+t%60;return{card:s,ageDays:r}}),[i]),m=a.useMemo(()=>{const s=p.toLowerCase().trim();return q.filter(({ageDays:t})=>n==="days"?t<=7:n==="weeks"?t<=28:n==="months"?t<=120:!0).map(({card:t})=>t).filter(t=>!v.has(t.id)).filter(t=>s?`${t.name} ${t.subtitle??""} ${t.requestSummary??""} ${t.request}`.toLowerCase().includes(s):!0)},[q,n,v,p]),f=s=>{A(t=>new Set([...t,s]))},E=s=>{const t=s.requestSummary?.trim()??"",r=s.request.trim();return t?`${t.replace(/[.!?]\\s*$/,"")}. ${r}`:r},B=s=>{g(s),w([{id:Date.now(),sender:"contact",text:E(s)}]),N(!0)},U=s=>{g(s),c(!0)},z=s=>{g(s),C(!0)},V=s=>{if(!s)return"No end date";const t=new Date(s);return Number.isNaN(t.getTime())?"No end date":t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},W=({card:s,primaryLabel:t,onPrimary:r,onRemind:G,onCantHelp:J,onFlag:K,isLast:Q})=>{const[k,R]=a.useState(!1),X=a.useMemo(()=>(s.name||"").split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase(),[s.name]);return e.jsx("div",{className:`hidden lg:block ${Q?"":"border-b border-border/60"} bg-muted/10`,children:e.jsxs("div",{className:`grid grid-cols-12 gap-4 px-5 py-4 text-sm ${k?"items-start":"items-center"}`,children:[e.jsxs("div",{className:"col-span-3 flex items-center gap-3 min-w-0",children:[e.jsxs(ue,{className:"h-10 w-10 border",children:[s.avatarUrl?e.jsx(he,{src:s.avatarUrl,alt:s.name}):null,e.jsx(xe,{children:X})]}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold leading-tight truncate",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground leading-tight truncate",children:s.subtitle||s.relationshipTag})]})]}),e.jsxs("div",{className:"col-span-5 min-w-0",children:[e.jsx("div",{className:"font-semibold leading-tight mb-1 truncate",children:s.requestSummary||s.request}),e.jsx("div",{className:"text-sm text-muted-foreground leading-snug",children:k?e.jsxs(e.Fragment,{children:[s.request,e.jsx("button",{className:"ml-1 text-primary hover:underline font-medium",onClick:o=>{o.stopPropagation(),R(!1)},children:"less"})]}):e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"truncate",children:s.request}),s.request.length>80&&e.jsx("button",{className:"ml-1 whitespace-nowrap text-primary hover:underline font-medium",onClick:o=>{o.stopPropagation(),R(!0)},children:"more"})]})})]}),e.jsx("div",{className:"col-span-2 text-xs text-muted-foreground",children:e.jsx("div",{className:"truncate",children:V(s.endDate)})}),e.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[e.jsx(h,{variant:"outline",className:"border hover:bg-accent hover:text-accent-foreground",onClick:r,children:t}),e.jsxs(pe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-9 w-9",children:e.jsx(fe,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",className:"w-52",children:[e.jsxs(b,{onClick:G,children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Remind me"]}),e.jsx(ve,{}),e.jsx(b,{onClick:J,children:"I can't help with this request"}),e.jsxs(b,{className:"text-destructive focus:text-destructive",onClick:K,children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Flag as inappropriate"]})]})]})]})]})})};return e.jsxs(Z,{children:[e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx(_,{}),e.jsxs(ee,{className:"flex min-h-screen w-full flex-1 flex-col overflow-x-hidden",children:[e.jsx("div",{className:"flex items-center gap-3 border-b bg-background px-4 py-3 lg:hidden",children:e.jsx(se,{className:"border border-border"})}),e.jsx("div",{className:"flex-1 px-4 py-8 sm:px-6 lg:px-10",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6",children:[e.jsxs("header",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-3xl font-bold leading-tight tracking-tight sm:text-4xl",children:[e.jsx("a",{href:"/trusted-list/requests",className:"hover:underline",children:"All Requests"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{children:x})]}),e.jsx("p",{className:"text-muted-foreground text-base",children:"Browse requests tagged for this category."})]}),e.jsx("section",{className:"flex flex-col gap-4 rounded-xl border border-border/50 bg-muted/30 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-full border border-border bg-background px-3 py-1.5 shadow-sm",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{value:p,onChange:s=>F(s.target.value),placeholder:"Search requests",className:"h-8 w-56 border-0 bg-transparent p-0 text-sm shadow-none focus-visible:ring-0"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(re,{value:n,onValueChange:D,children:[e.jsxs(ne,{className:"h-10 rounded-full border border-border bg-background px-4 shadow-sm flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Filter"}),e.jsx(le,{placeholder:"Filter"})]}),e.jsxs(ie,{children:[e.jsx(u,{value:"days",children:"Days old"}),e.jsx(u,{value:"weeks",children:"Weeks old"}),e.jsx(u,{value:"months",children:"Months old"}),e.jsx(u,{value:"all",children:"All time"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-muted/40 px-2 py-1.5",children:[e.jsx(h,{variant:"ghost",size:"icon",className:`h-9 w-9 ${d==="grid"?"bg-background shadow-sm":""}`,onClick:()=>j("grid"),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",className:`h-9 w-9 ${d==="list"?"bg-background shadow-sm":""}`,onClick:()=>j("list"),children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})}),e.jsxs("div",{className:d==="grid"?"grid gap-4 sm:grid-cols-2 xl:grid-cols-3":"space-y-3",children:[d==="grid"?m.map(s=>{const t=s.name.split(" ")[0]??s.name;return e.jsx("div",{className:"p-1",children:e.jsx(oe,{...s,primaryCTA:`Help ${t}`,onClear:()=>f(s.id)})},s.id)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden lg:grid grid-cols-12 gap-4 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:[e.jsx("div",{className:"col-span-3",children:"Requestor"}),e.jsx("div",{className:"col-span-5",children:"Request"}),e.jsx("div",{className:"col-span-2",children:"End Date"}),e.jsx("div",{className:"col-span-2 text-right pr-2",children:"Action"})]}),e.jsx("div",{className:"hidden lg:block rounded-2xl border border-border bg-card shadow-sm overflow-hidden",children:m.map((s,t)=>{const r=s.name.split(" ")[0]??s.name;return e.jsx(W,{card:s,primaryLabel:`Help ${r}`,onPrimary:()=>B(s),onRemind:()=>U(s),onCantHelp:()=>f(s.id),onFlag:()=>z(s),isLast:t===m.length-1},s.id)})})]}),m.length===0&&e.jsx("div",{className:"rounded-2xl border border-dashed border-primary/30 bg-primary/5 p-6 text-center text-sm text-muted-foreground",children:"No requests match this filter yet."})]})]})})]})]}),e.jsx(de,{open:O,onOpenChange:N,contactName:l?.name||"",messages:L,composer:$,onComposerChange:y,onSend:s=>{s.trim()&&(w(t=>[...t,{id:Date.now(),sender:"user",text:s}]),y(""))}}),e.jsx(ce,{open:I,onOpenChange:c,selection:H,onSelectionChange:P,reminderActive:T,onSet:()=>{S(!0),c(!1)},onCancelReminder:()=>{S(!1),c(!1)}}),e.jsx(me,{open:M,onOpenChange:C,requestorName:l?.name,requestorAvatarUrl:l?.avatarUrl,requestSummary:l?.requestSummary,requestText:l?.request||"",onSubmit:()=>{l&&f(l.id)}})]})}export{Ie as default};
